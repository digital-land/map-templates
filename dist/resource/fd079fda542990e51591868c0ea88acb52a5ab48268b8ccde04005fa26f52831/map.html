<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" crossorigin="" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.fullscreen@1.6.0/Control.FullScreen.css" crossorigin="" />
<link rel="stylesheet" href="https://unpkg.com/leaflet-sidebar@0.2.2/src/L.Control.Sidebar.css" crossorigin="" />

<style>
  body {
    margin: 0;
  }

  #map {
    width: 960px;
    height: 640px;
    transform: translate(-50%,-50%);
    position: absolute;
    top: 50%;
    left: 50%;
  }

  .leaflet-sidebar {
    display: none;
    width: 200px;
  }

  .leaflet-sidebar.visible {
    display: block;
  }

  .leaflet-sidebar .close {
    z-index: 10000;
  }

  .leaflet-marker-icon.marker-cluster {
    line-height: 18px;
    text-align: center;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    background: #fff;
    border: 2px solid #222;
  }
</style>

<div id="map"></div>
<div id="sidebar"></div>

<script>
  var geoJson = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"objectid":127,"lad19cd":"E07000103","lad19nm":"Watford","lad19nmw":" ","bng_e":510441,"bng_n":198197,"long":-0.40429,"lat":51.6717,"st_areashape":21430351.404046014,"st_lengthshape":26392.36379176056},"geometry":{"type":"Polygon","coordinates":[[[-0.38686116161508677,51.6962385030611],[-0.38739919515631854,51.69636734677542],[-0.3879091315078825,51.69639053673377],[-0.38833415567364443,51.69640266945552],[-0.3884427952829573,51.69644101819855],[-0.38910571182623643,51.696678543242236],[-0.3893801296405918,51.69677580149961],[-0.38978183967177554,51.69699445420662],[-0.39016068052052183,51.69716505793064],[-0.3907032284593272,51.697453060823136],[-0.39114069062653883,51.697727033945846],[-0.3917564937477106,51.69811312166813],[-0.39258578925641174,51.69863975874028],[-0.39392163124683444,51.69937109212222],[-0.3949223289283794,51.699883877932216],[-0.39601286942622416,51.70035015074825],[-0.3965024507472594,51.70054211460254],[-0.39691706824841166,51.70068441912557],[-0.397717474433521,51.7009273695891],[-0.3983051755835135,51.701088215004695],[-0.39913887496478906,51.70128756238623],[-0.40081505605465073,51.7016476145717],[-0.4020250669467204,51.70189252324474],[-0.4024125299235317,51.70194274644307],[-0.4027656171620819,51.70079386070376],[-0.4029414057719591,51.700403328928786],[-0.4031945600337185,51.69991307890959],[-0.4033090337762073,51.69974563707772],[-0.40362695669855925,51.699306607902386],[-0.4039425987759569,51.698928764746],[-0.40406989509817,51.698891841894884],[-0.4044344827766845,51.69844184902888],[-0.40507018894754054,51.69756297161583],[-0.40544066688276115,51.6969448644803],[-0.4055243906985449,51.69686770493341],[-0.4057805673228427,51.69649713808607],[-0.4073173766293081,51.69661967926164],[-0.4075463621928253,51.69631975585531],[-0.4076873779426234,51.696136398564185],[-0.4080851887393405,51.69560495077113],[-0.40907607621912573,51.694293893615054],[-0.4093997314112985,51.69389277006804],[-0.409493848943155,51.69376720612999],[-0.4101414438237957,51.69275541672778],[-0.41054761176652327,51.69210631082659],[-0.410873776447852,51.69159185764911],[-0.4112461019348117,51.69099901092866],[-0.41138504433025325,51.690710443416],[-0.4118793733153783,51.68993747917247],[-0.41223388196843613,51.689358681044794],[-0.41236429509798356,51.689146496280664],[-0.4125996955254404,51.6888691194115],[-0.41267210908989327,51.68878371063551],[-0.41273804124213903,51.68871987774857],[-0.4128363505003771,51.68863760572417],[-0.41306498684403675,51.68847160602336],[-0.4134817430491884,51.68822014221696],[-0.413798918795688,51.688046347587644],[-0.4139778349907986,51.68797505247664],[-0.4149815072839845,51.6875722190597],[-0.41565671274572014,51.68733502485565],[-0.4163397850823754,51.68716616172534],[-0.41645360919732577,51.68713803276903],[-0.4172503176009093,51.68694283005337],[-0.41837021466806845,51.686732289929715],[-0.4194219867271196,51.6865629751189],[-0.41957805761247513,51.686527319634074],[-0.423160689373943,51.68572120565933],[-0.4232073235036067,51.68571104400294],[-0.42421923544091267,51.68548271839719],[-0.42464862674558007,51.68540757373863],[-0.4250554462029473,51.68535729542163],[-0.4252628660079287,51.685340299673925],[-0.42561639258217077,51.68532706073584],[-0.4258708467104606,51.685329572401],[-0.42672447836917055,51.685368878376075],[-0.42737899101953253,51.68543697525883],[-0.4279430546285034,51.684146083112],[-0.42815724935247834,51.68405725690227],[-0.4287336046951848,51.68387430122339],[-0.430025133331013,51.68342223054589],[-0.43003840349407246,51.68341791278543],[-0.43007493018695725,51.6834067149196],[-0.4303145178177028,51.68321115850619],[-0.43081742363464703,51.682851016243795],[-0.4311418019105079,51.68263142026057],[-0.431347245152527,51.68246417222683],[-0.4314479621012751,51.682352249202786],[-0.4316140697138177,51.68198400879526],[-0.4316227367233498,51.68190231970391],[-0.4316112074065054,51.681814877514284],[-0.43157965215651095,51.681723661861525],[-0.4315021164108339,51.681541037876016],[-0.43126452996338566,51.68129955206632],[-0.43125197064172527,51.681286798947724],[-0.43111087435411677,51.681100538126294],[-0.4310771493902919,51.68102727307756],[-0.43105258747446634,51.680944240903386],[-0.43095992355431045,51.68086470414864],[-0.4308153516168637,51.68077557429355],[-0.4307753732425553,51.68076245477357],[-0.4306351209464259,51.6807174302762],[-0.430390827912217,51.68062876575063],[-0.4302118134554358,51.680535488971806],[-0.43007562981473735,51.680417702763116],[-0.4299963383589154,51.68036540306869],[-0.429945511593105,51.68033146178253],[-0.4297568994920389,51.680136474810325],[-0.42965578122757164,51.68000836999596],[-0.4296684952963544,51.679933927038775],[-0.4297029692985367,51.679899238707],[-0.4297749927417497,51.67986514232164],[-0.42984987149539206,51.679793327980384],[-0.4299684885926556,51.67974996665714],[-0.430564424586743,51.67958524267395],[-0.4307160197224102,51.67950905854427],[-0.4308179406914624,51.67944839274299],[-0.4309245253221647,51.67937700131867],[-0.43101003944244415,51.6792872595557],[-0.4310566613035402,51.6791943913638],[-0.4311030305272443,51.67902600759155],[-0.43109855511320405,51.678903600188995],[-0.43106734320808654,51.678761148283606],[-0.4310539180200747,51.67872860631579],[-0.43102721351268025,51.67862477999562],[-0.4309255403715798,51.67846790305281],[-0.43087412800844344,51.67840608687402],[-0.4304688040689966,51.677915056178946],[-0.43031528598256547,51.677712447933246],[-0.43023711564193207,51.67758644780619],[-0.4302145471132536,51.67744590960502],[-0.43025168992718976,51.67725124294093],[-0.43029038709260053,51.67709435313427],[-0.4303024167509542,51.676912026084445],[-0.43019757969681355,51.67676400570371],[-0.43000879013922977,51.6763676499112],[-0.42991728403583895,51.67625495676762],[-0.4298645699885528,51.676189527688415],[-0.4298270913403945,51.676142190290996],[-0.42979864905227566,51.67613012388256],[-0.4297188312036588,51.67609669410895],[-0.4294891726879774,51.675878773762435],[-0.42943957254892334,51.675806104313686],[-0.42934048651644213,51.675660946722715],[-0.4292616025529773,51.67560055996667],[-0.4291290516775894,51.67549891350826],[-0.42892643420875676,51.67529573602559],[-0.42890113355967247,51.67527562025648],[-0.4288059367413232,51.67522490436019],[-0.42862440333672774,51.67507765360958],[-0.42849228172170356,51.67496711235865],[-0.4284598341310815,51.67494330491036],[-0.42811345007362117,51.67471473998342],[-0.4277662369922572,51.67446548553486],[-0.4276840604882298,51.67441763979703],[-0.4276064549318851,51.674361764965674],[-0.4275518497716847,51.67430979307942],[-0.42752410339235336,51.674232920035436],[-0.4275200717254027,51.67409802255591],[-0.4275396023082724,51.67390941302715],[-0.42769848806838734,51.67366702388778],[-0.4277967748170487,51.673418339939616],[-0.42788848113848804,51.67298429181234],[-0.4278531819158316,51.67287414660688],[-0.4278502914629429,51.672833654944874],[-0.42784514202709856,51.672648310914944],[-0.42788806810134183,51.672576069767814],[-0.4281092251160167,51.67245677156085],[-0.4282511077822102,51.67236778573146],[-0.42830676970776943,51.67230650272426],[-0.4283212548835272,51.67218084243165],[-0.42831339477937863,51.67211511344833],[-0.42830901650600656,51.67207280344976],[-0.42825693498582434,51.67203066531018],[-0.42802794850846654,51.67192152321197],[-0.42791349269183576,51.67184178212735],[-0.42787501640090964,51.671785532001984],[-0.4278633317580557,51.67174761937131],[-0.4278575227748844,51.67174664240411],[-0.4278633734110926,51.67166033134123],[-0.42793538482093224,51.671584883490226],[-0.428015755973427,51.67147808394246],[-0.42803419427374223,51.67132092402725],[-0.4280329212559179,51.671192355214764],[-0.4280121739896195,51.670996015404334],[-0.42803072764798666,51.67088029824405],[-0.42810382932349617,51.67077331139586],[-0.42829076712753966,51.67055377064834],[-0.42834220342796525,51.67052838885258],[-0.4285290385482642,51.670521899180194],[-0.4287154073226221,51.670611591128285],[-0.4291632074111072,51.67058252110342],[-0.4294374930978393,51.67055742302331],[-0.42983506857481674,51.67051868939694],[-0.4309447139574223,51.67029790053371],[-0.4313665487803338,51.67093748013523],[-0.4319090463963387,51.671812488760224],[-0.4323978588246777,51.672609377616055],[-0.43438058189546325,51.67278154478436],[-0.43515200141413707,51.67284665408685],[-0.435448702233573,51.67284250861356],[-0.43559980420771516,51.672821143960924],[-0.43610198455110516,51.672684794317185],[-0.4363848626879327,51.67270113847216],[-0.4366890893591901,51.67273124929139],[-0.43695957115703493,51.67277169995818],[-0.438140995031031,51.67281794928397],[-0.4394152420839469,51.67281417665512],[-0.4394210457367212,51.67277020455294],[-0.43954324023556945,51.67275024991073],[-0.43933514348240643,51.672323990597945],[-0.43899244109641283,51.671692691012126],[-0.43880833483982684,51.67137012932498],[-0.4386212505463124,51.67104752695051],[-0.43828928950021157,51.67056559481508],[-0.43802247394852706,51.67029407462041],[-0.43774468991946863,51.6700018215605],[-0.4372072283276828,51.66943894904228],[-0.4368074925245186,51.66903890654248],[-0.43648509895135484,51.668699132440025],[-0.4364285343867645,51.668662422193194],[-0.43627546050642574,51.66848868746142],[-0.43618536579380024,51.6682069247072],[-0.4366906531817259,51.667223613226966],[-0.437294550575797,51.666062620401895],[-0.43730060994264536,51.666052812116796],[-0.43779423959836306,51.66515743435493],[-0.43814793937103497,51.66445805959351],[-0.4381772102390338,51.664445862506355],[-0.4382578677285861,51.66441277224707],[-0.4382890811652121,51.66434756212072],[-0.43813294060918184,51.66417999119812],[-0.4379269195092903,51.66394793132272],[-0.4378411305775339,51.663793968205155],[-0.43771456376287843,51.66356386170009],[-0.43760222458661835,51.66329798494196],[-0.43758537493848176,51.66324022726656],[-0.4375183364537795,51.66296056870712],[-0.43753168859316954,51.662742208091984],[-0.4375303493324266,51.662191933998635],[-0.43752817177780096,51.66183582491364],[-0.4374997515187093,51.66169511955264],[-0.4374543620187075,51.661541693317005],[-0.4373231897373475,51.661237809665955],[-0.4371866060807185,51.661046224386354],[-0.4369748262054485,51.66064598034017],[-0.4367987171257342,51.66042869868199],[-0.43642747307132956,51.66008297045031],[-0.436215059464679,51.65990925491643],[-0.43604921938825697,51.65977130754879],[-0.43593785446341754,51.6596889211159],[-0.43542603245823797,51.65930985687111],[-0.43377831847426107,51.6582034080081],[-0.43256900136185017,51.65738342984362],[-0.4324616545137336,51.657312687756054],[-0.4323872775845791,51.65728832210385],[-0.4319539705361412,51.657274450440084],[-0.43171144864649347,51.657265819484095],[-0.43156635892036477,51.6572387119986],[-0.43138044505543066,51.65717869733448],[-0.4311708569837302,51.65709319443907],[-0.43084541458889447,51.656931440540944],[-0.43045600164682973,51.65673745755119],[-0.4302761810150822,51.65650123586553],[-0.43030398762379685,51.65648992014781],[-0.43022084656267406,51.65642947807128],[-0.43009244554253817,51.65637832000466],[-0.42999507919576335,51.65635355581607],[-0.42932473716103153,51.65633830494697],[-0.42922510311756157,51.656334276399036],[-0.4286172984384556,51.65626861719741],[-0.4277947880064129,51.656265705681335],[-0.4278798227928365,51.656147281346385],[-0.4279526805716063,51.65604667303275],[-0.42783491816716385,51.65569162606427],[-0.425086722879331,51.65510457182793],[-0.4244475483203778,51.65498174552785],[-0.42446419849193273,51.65496219224826],[-0.4246474848278969,51.65476058529069],[-0.42473120334845393,51.65451530184854],[-0.4247647100255105,51.654343060527566],[-0.4247802484205321,51.65431090592727],[-0.42498439489638634,51.65388564729246],[-0.42520070775943786,51.6535666276266],[-0.42557458788422486,51.653165127232356],[-0.42582296528944735,51.65300754015552],[-0.42600688514084695,51.652869764981254],[-0.4264010679481631,51.65246673519682],[-0.4266187225715824,51.652235829807005],[-0.42657157654706734,51.65209316236653],[-0.4265510484736593,51.651976921463245],[-0.4264593213883954,51.65149366933319],[-0.42644452852130776,51.651087949252066],[-0.4264961032263704,51.65051761902188],[-0.42652089458833586,51.65046940723295],[-0.4265517474216328,51.650411386670605],[-0.42664621352888127,51.650357724721324],[-0.4267743221051746,51.65033067248899],[-0.4269606436723721,51.65029181370123],[-0.4271466514827624,51.65022418321846],[-0.4274130921272715,51.65004337013032],[-0.42744850721553784,51.64998091603774],[-0.4274308670767287,51.649946519230475],[-0.4274190336001354,51.64987174654983],[-0.42744152585281386,51.64980732108309],[-0.42750378453343846,51.64971996504101],[-0.42766550321647445,51.64959986880777],[-0.42817819857328865,51.64944581185932],[-0.42897399731595937,51.64921453947496],[-0.4291448752801207,51.649122341698224],[-0.42926888010325254,51.64896218392447],[-0.42997386872030846,51.64868204546034],[-0.4303509318739028,51.64852068264769],[-0.4288379846117595,51.647588730562774],[-0.42824034887320056,51.647232657049216],[-0.42811751071926274,51.647145612637175],[-0.4280159416740966,51.64707413407616],[-0.42800000513864717,51.647076617695134],[-0.42792002328868517,51.64709083021241],[-0.4277742003299718,51.64695852914368],[-0.42761405563903293,51.646868197496325],[-0.42752430012156944,51.64670338378216],[-0.4271105642210906,51.64633727008973],[-0.42649959055952397,51.64578233708267],[-0.42603282238033363,51.64536516611739],[-0.4271845130212838,51.64491383943057],[-0.42747470430539963,51.64487906669728],[-0.42848893015977324,51.644266770174504],[-0.42929612695565744,51.64374429078091],[-0.4293626219892843,51.64370292832045],[-0.42937293821234135,51.6436940766029],[-0.4294764254006195,51.643627137116994],[-0.42963981756567454,51.643502566138615],[-0.42986782089263365,51.643301456163385],[-0.4303928834608367,51.642873187535976],[-0.4304514567755489,51.642809244231245],[-0.43068339467229866,51.64253536836308],[-0.4308214709522924,51.642387983253236],[-0.4311206376192613,51.642096124421144],[-0.4296066322764562,51.64153543037537],[-0.4291818101827664,51.64140479359243],[-0.42882490695075437,51.64131911293623],[-0.42860133448420124,51.641264792074296],[-0.4284139975265109,51.64125149877591],[-0.4281557917157105,51.64123725734244],[-0.4279854464163735,51.641232282039105],[-0.427888675009843,51.6412291899644],[-0.42654526088689937,51.64120851444772],[-0.4265478748911876,51.641133034421586],[-0.4258318328155933,51.64111265727957],[-0.4254635967456613,51.641103229912275],[-0.4249934034594243,51.641075353884325],[-0.42458755787298486,51.64106811567623],[-0.42449395277895163,51.6410596686918],[-0.4241754748018236,51.64103112636094],[-0.42274310007759724,51.64091302340299],[-0.4214921349221459,51.64085208756473],[-0.4200004533585086,51.64077450738133],[-0.41888982401830643,51.6407523786176],[-0.4178549005435718,51.640756423281296],[-0.41697223108260417,51.64078856884018],[-0.4165406888505285,51.640814299633114],[-0.4158084474080173,51.64088262845973],[-0.415242103464103,51.64096038370017],[-0.41502217973015604,51.64100685804271],[-0.41493201687609943,51.641022720310914],[-0.4149131915991145,51.64102606207594],[-0.4147350378261963,51.640872626021455],[-0.41460500204285733,51.64078816237554],[-0.414464156460612,51.640723241407315],[-0.4142438210447319,51.64069958682578],[-0.41390633672511135,51.6406797429363],[-0.4137696624284525,51.64066261283279],[-0.41367364725377126,51.64063794087899],[-0.41352653453358423,51.64062965908767],[-0.4135120923294823,51.640630363065796],[-0.41344435982840666,51.640624951975106],[-0.41339703103107134,51.640615322327],[-0.41330387490180137,51.64059068963132],[-0.413188609287766,51.64054058543134],[-0.4131195110805226,51.6405333581044],[-0.4130463683886905,51.640556641229004],[-0.4129956333685521,51.64060360132928],[-0.4129078845881299,51.64071748494533],[-0.41288051145042615,51.64075406270467],[-0.4128229995876232,51.640746002748934],[-0.41277516987222357,51.64075075032716],[-0.4127345146424488,51.64075478471948],[-0.41267887105806,51.640734164194676],[-0.4126517920301197,51.640724808173054],[-0.4124490027045035,51.64069689318545],[-0.4122670972064621,51.64064768495347],[-0.41185814520296243,51.64048393028343],[-0.4115467800113396,51.6403339902372],[-0.41132151891328633,51.64020598222672],[-0.4109768761923969,51.6400196313415],[-0.41087954564137574,51.63995088913783],[-0.41077932172566894,51.63996481439136],[-0.41066300471779477,51.64006752118798],[-0.4103272374293007,51.640247354008146],[-0.41025439027212446,51.640303003035584],[-0.4101776326206757,51.6404737593075],[-0.40993261439097306,51.64078427410983],[-0.4092910638944224,51.64061726762725],[-0.4088266560400584,51.64157764644692],[-0.40850005038741044,51.64203277696711],[-0.40831762019427176,51.6422875002922],[-0.40815424297114994,51.64262069185305],[-0.40809101370080125,51.642734903598026],[-0.4079549781528099,51.642740249155814],[-0.4073044584798358,51.64294726620423],[-0.4066701751549405,51.64314991413535],[-0.4065488086039452,51.64318881077048],[-0.4057321949299148,51.64347617915196],[-0.40493752870423144,51.64379997883464],[-0.40485989903564307,51.64382859024762],[-0.4047295982971281,51.643792656984154],[-0.40466233886267583,51.64377367336391],[-0.40460112573104806,51.643708115103685],[-0.40441420322175403,51.64367950295743],[-0.40423808343884593,51.64371306755158],[-0.4040238987556908,51.64372094189008],[-0.4039037253844033,51.64372919626521],[-0.40353449105786116,51.64374754725237],[-0.4032567432215898,51.64383465480694],[-0.4027930801446217,51.643867899375024],[-0.40242702412558856,51.6434267320927],[-0.4023826427321898,51.643373987456364],[-0.4022420724567448,51.64346745457413],[-0.4021012934830404,51.64336026766473],[-0.4019493072870048,51.6432431280685],[-0.40167901777037807,51.64308113712524],[-0.40125437422707677,51.64282543546235],[-0.4002556577579155,51.64225337790238],[-0.4002008437294047,51.64224993375978],[-0.3997346640725027,51.64198637876133],[-0.39914042120435955,51.64166443884374],[-0.39813259256640454,51.64110212591606],[-0.3986808556532518,51.64072026098425],[-0.39894303419864274,51.640499903249],[-0.399240924340772,51.640327767275494],[-0.3994200495494568,51.64024921197612],[-0.3997753687014143,51.640009535701715],[-0.3994249756595895,51.63986262837238],[-0.3993055671288638,51.639808858049285],[-0.3983013350394494,51.63939232058186],[-0.39810519504864145,51.63929794769194],[-0.3979973141606571,51.63924514272075],[-0.3979258125153943,51.639221691820545],[-0.39777864208983693,51.63917473298706],[-0.39731860741259856,51.63898146273377],[-0.3970002127144055,51.63883318670471],[-0.39642177920824545,51.63859505366831],[-0.39514545664975537,51.63807048822855],[-0.3945614774774751,51.637831371784394],[-0.39429217083788737,51.637720707908144],[-0.39420939999606813,51.63773306016735],[-0.3939536601737631,51.63789587145782],[-0.3937002321661502,51.63807408631887],[-0.39300336417623216,51.63848985265103],[-0.392931190524287,51.638529318204135],[-0.3926166368055958,51.63863657269143],[-0.3919804301536849,51.63901450745107],[-0.39152456138155084,51.639276245708466],[-0.39094889835323376,51.639616348328815],[-0.3908094026728297,51.6396791616],[-0.3902199175490862,51.640042444973375],[-0.3899407772792018,51.63988309176011],[-0.38898332733602914,51.639376229470834],[-0.3888925392385086,51.63932553920104],[-0.38861494573647987,51.63924711122482],[-0.3880049160192147,51.63892669633802],[-0.38768207663552995,51.63882058555284],[-0.3875737219245072,51.63882179341876],[-0.38745607440982566,51.63883635845563],[-0.387408800762485,51.638905919513114],[-0.3873417911031006,51.63912524904326],[-0.387216619109296,51.639596572113305],[-0.3871780175252462,51.63962660664446],[-0.3871592319179933,51.63962545009075],[-0.3868262718546141,51.63960289267055],[-0.38645311367482493,51.63956809592682],[-0.3862957037134806,51.63952457792984],[-0.38626276193786163,51.63951603353668],[-0.38633220198833274,51.639107772977624],[-0.3865030295965096,51.638287374632235],[-0.3862915505345288,51.638219739187555],[-0.3858136268677916,51.63824642823935],[-0.38569874261156584,51.63822686745294],[-0.38551111921118103,51.63821889236547],[-0.38503046248703543,51.63812139083435],[-0.3847020670633156,51.63805124490278],[-0.38449687420868234,51.63800796587307],[-0.38448055493015243,51.63802122526751],[-0.384415040734726,51.63807426225598],[-0.38368744199603777,51.63785118325563],[-0.3832519995857265,51.638026778213856],[-0.3828299272717019,51.638151404435675],[-0.38230205543583523,51.637837484714076],[-0.3819396639074136,51.638029365411555],[-0.38082148270831323,51.638588569177685],[-0.38033068175650014,51.63820772900907],[-0.3801282463124738,51.63800706861909],[-0.37983434053888565,51.63781871978877],[-0.37936522597129274,51.637521779888836],[-0.37859441760830614,51.637131580945265],[-0.378532732661887,51.63711724353502],[-0.3784573189515503,51.63712698952655],[-0.3782290251796554,51.637247084042855],[-0.3781050700538105,51.63731818838749],[-0.37773950021675745,51.63755864668441],[-0.37758710798843215,51.637618569138446],[-0.37737341493395227,51.637733381219505],[-0.3780200060962195,51.63812187109676],[-0.3783967813943285,51.63837519777028],[-0.3793758691082889,51.63908660445713],[-0.3795111173357016,51.639223319567094],[-0.3795404294208201,51.63925339117184],[-0.37952579479491316,51.639259481933045],[-0.3795155115430057,51.63926383431034],[-0.37979238969737444,51.63952215951638],[-0.3799609491704846,51.63961708242749],[-0.3798201654171005,51.639675459495464],[-0.379430302305957,51.639748287784684],[-0.3788759953281966,51.639851204729034],[-0.3777675662084945,51.64005173142246],[-0.37718913580901425,51.640142620386015],[-0.3769167824714446,51.64024133775009],[-0.3768742816986018,51.640256930742346],[-0.3766663596256325,51.64033325480454],[-0.3766250288306104,51.64035605690453],[-0.3765918157703394,51.64039515220646],[-0.3765882820242503,51.640493991706535],[-0.37625750477038844,51.64069357343558],[-0.37531992680766363,51.64156995758582],[-0.37538262888575014,51.64159599724993],[-0.375796020709991,51.641958705398515],[-0.3739742552639734,51.6425404666232],[-0.3725043598292464,51.643025405682614],[-0.3718441038558799,51.64325995960021],[-0.37167883861460427,51.64335574543209],[-0.3716528840587907,51.64339494009152],[-0.37163407591450287,51.64343423481916],[-0.3717166194741777,51.64351179404461],[-0.3719081865080462,51.64360974370839],[-0.37270642550636174,51.643841157252446],[-0.3740221371858078,51.6441516555592],[-0.3757804894057097,51.64461480054449],[-0.37600370854680437,51.644717767679694],[-0.37623349011953944,51.64484051222628],[-0.3762462483117829,51.64484698164723],[-0.3768218706881973,51.64536304965142],[-0.3773311788646326,51.64587091567175],[-0.3777312075010022,51.64620556447357],[-0.37789197744438097,51.646358904929755],[-0.378124408170189,51.64648797516402],[-0.3781700308037733,51.646517653835225],[-0.37820488806502095,51.64654032970553],[-0.37914444673684977,51.64714861720028],[-0.3806406524262221,51.648116170441],[-0.38071343708025573,51.64814054874827],[-0.38071774746577086,51.64814330504361],[-0.38089378066852997,51.647909302028324],[-0.38182623649056036,51.64814690998579],[-0.38243362730162744,51.64830280701443],[-0.3830767430259989,51.64846629442651],[-0.38310149706687324,51.64846393870748],[-0.3831318830789963,51.648460761348694],[-0.3831706676022444,51.64846938709057],[-0.3833169339677002,51.64850196742709],[-0.38311302618689647,51.648869717464315],[-0.3833483855018504,51.64907792791352],[-0.38340847386789056,51.64917773298537],[-0.3835524932976302,51.649313665563255],[-0.38357007842432594,51.64942897689356],[-0.38346545274610705,51.649729682910994],[-0.3834827999166785,51.65009598603915],[-0.38346343730325166,51.65063969194441],[-0.383507685145759,51.65089660085717],[-0.3834926086562196,51.65107897586012],[-0.3834031741472942,51.65123416594027],[-0.38326010927498144,51.6513958991021],[-0.3832089793032324,51.65189781365857],[-0.3832306935260769,51.652221835084525],[-0.383285119948134,51.65239707625764],[-0.383298182125808,51.65243860937338],[-0.3833232247261955,51.6524650250204],[-0.38348260755651503,51.65253464353826],[-0.3836433992449928,51.65264842202312],[-0.38373585787228365,51.65272970407592],[-0.3837583106153891,51.652792042590995],[-0.38372575577940593,51.65285272516674],[-0.3836850812758077,51.652897114154165],[-0.3836817186317876,51.652991550537486],[-0.3837810844769377,51.65308641261017],[-0.38393342594658686,51.65314964063721],[-0.38393616179000856,51.653236879887196],[-0.3839061524128981,51.65326622233363],[-0.38392263102964497,51.65337252848829],[-0.3839632345254179,51.6534908542184],[-0.38403656248317775,51.65362410374219],[-0.38425794057660034,51.65386088565897],[-0.38440793937100043,51.65387283962853],[-0.38449504426863845,51.65402425779954],[-0.3846866965685045,51.654285891837105],[-0.38468939623254444,51.65429042427249],[-0.3850469636592418,51.65492750559089],[-0.38536454456542596,51.65542909963032],[-0.38580073311352886,51.65600792782927],[-0.3862878969518015,51.65653801047915],[-0.38655841100935223,51.65677825020587],[-0.3865746566378144,51.656810836038474],[-0.38657729135505575,51.656817165092406],[-0.38668101070921107,51.656867135849176],[-0.3866689435548862,51.6568813532363],[-0.3866492790395392,51.65690805277446],[-0.38653093642889835,51.65698104095556],[-0.38647177773697416,51.65701888402927],[-0.386470528672921,51.65705401701312],[-0.3866892851180195,51.6572044559471],[-0.3868311983056766,51.65723966810161],[-0.3867357834481825,51.65740206047547],[-0.38667909269680895,51.65749117861529],[-0.38650290623855316,51.657648774708825],[-0.38633974273302596,51.65776528734826],[-0.3862304309570489,51.65790941823429],[-0.38615779927707156,51.65808470911041],[-0.3861374705204602,51.65865635856563],[-0.38608741480909836,51.65888400911311],[-0.3860607413081497,51.65906442378632],[-0.3859293055280993,51.65930452687362],[-0.38581067483644305,51.659509656369714],[-0.38558046459636874,51.65972143237959],[-0.38539902186943203,51.65990601014197],[-0.3853325115670339,51.6600264546143],[-0.38527720938880056,51.660405145667795],[-0.38528467709493375,51.6605204048491],[-0.3852934737169712,51.66067874312374],[-0.38534428550271177,51.660795407778004],[-0.385490284820736,51.660957520560515],[-0.38561530250960935,51.66106262019776],[-0.3859386691515353,51.66123885769842],[-0.38604855195245036,51.6613203763218],[-0.3864696189922642,51.66188100226814],[-0.3866242327932214,51.66216998566685],[-0.3867001324588973,51.66231216539234],[-0.38674908898507293,51.66252148621805],[-0.3867996616121708,51.66276588969642],[-0.3868159996709323,51.663000742405],[-0.38680795564314174,51.66322725971199],[-0.38674356195447224,51.66340895359248],[-0.3866901785756008,51.663609586985324],[-0.38665393540283827,51.66365322784595],[-0.3866106732565676,51.663693086338206],[-0.38654811247135745,51.66374256825723],[-0.3864770362611793,51.663790134665255],[-0.3863782416823506,51.66384271442507],[-0.38627248716307294,51.663889804922874],[-0.3861627074074513,51.66392605208344],[-0.3860488581708405,51.663956040393956],[-0.38584980846690664,51.66398476717499],[-0.38566520395986814,51.664053246115635],[-0.3855478281087265,51.66413883077376],[-0.38552301686353146,51.664186134546675],[-0.38551230426422417,51.6642057645888],[-0.38548816600325875,51.664395202412436],[-0.3855238432725039,51.664488286334326],[-0.385622249162996,51.664611088781996],[-0.38571791268372835,51.66472387572569],[-0.3857529762217992,51.66483762682342],[-0.3857494347836642,51.6648969992616],[-0.3857235785428318,51.66493350079889],[-0.3856594885139626,51.66498565795295],[-0.38556315835857763,51.66505265387321],[-0.3854951948971514,51.6650930714465],[-0.3853013431720337,51.66517670570234],[-0.3850271465203427,51.665243141954626],[-0.3845744271826861,51.66532770812682],[-0.3841173163983588,51.665455360820665],[-0.3839426492909847,51.66552586192836],[-0.3837414465989938,51.66565523868657],[-0.3836218153848745,51.665807403250504],[-0.3835705606498588,51.665947833973156],[-0.3835795873412744,51.66617997954223],[-0.3835033707926538,51.66669682022577],[-0.3834599527028903,51.66698218122184],[-0.38335025959626523,51.66738088400867],[-0.3831886491056335,51.66773742644246],[-0.3830451161237942,51.66795119687142],[-0.38301047933264465,51.66802991702652],[-0.3829943762182934,51.66815734510751],[-0.38307122248220815,51.66827616498801],[-0.3832419170689878,51.66839456978484],[-0.38342782627030136,51.66849421694608],[-0.383593710042039,51.66854684212564],[-0.383783448524863,51.668579119235474],[-0.3838925265033527,51.6686030946994],[-0.38405966785411977,51.66870077391629],[-0.3842010495397705,51.668832167263666],[-0.3842127201703004,51.6689096376543],[-0.3841991022999108,51.66900752523758],[-0.3841425787388646,51.669131700296276],[-0.38409288563913246,51.669228102197685],[-0.383973533056003,51.669372177627444],[-0.3838525393638141,51.66948198157106],[-0.3835508039676,51.66975209564006],[-0.3833187639133497,51.669933273788715],[-0.3828693059902502,51.670249894553805],[-0.3826566585902697,51.67037191848534],[-0.38252637211500967,51.67041776784142],[-0.38243068817330034,51.670422742181756],[-0.38234404677154615,51.670421548417885],[-0.38224198049472696,51.67040486009294],[-0.38204729385026887,51.670347342058406],[-0.38176867656083663,51.67025270771171],[-0.3815142484188257,51.670208748030944],[-0.3813205233561538,51.67020787561591],[-0.38120345035353664,51.67024761308953],[-0.38110744635776433,51.67026157126924],[-0.3809908011541714,51.670249175012714],[-0.3805453426419745,51.67012877560814],[-0.3803235881663659,51.67010144426069],[-0.38013405883113144,51.67010332446833],[-0.38007762516671034,51.67010434330992],[-0.3797681100567951,51.67010726399596],[-0.3797058369247837,51.670108202069734],[-0.37968188715832435,51.670010785296476],[-0.37967186500230654,51.669967497736636],[-0.3796471865597592,51.66997075304818],[-0.37958608813413475,51.66997889910476],[-0.3791792540552105,51.670032613532904],[-0.37904222868175563,51.67010353663067],[-0.3787970232459725,51.670289019905084],[-0.37851627201488897,51.67049828316449],[-0.37815613485066985,51.67086376525922],[-0.3776386481593748,51.67134483499203],[-0.37728231833491455,51.67160339250262],[-0.3771329851116266,51.67169490890142],[-0.37696540236361964,51.67176990172226],[-0.37682083449468007,51.67185150604222],[-0.37655290694898,51.67206184172339],[-0.3760875659097425,51.6724977796475],[-0.37578224449416353,51.67278670439046],[-0.37543120950620446,51.673100165722545],[-0.37533615540182025,51.67317076648229],[-0.3752832059984176,51.67319430616024],[-0.3751117728723804,51.673256747965894],[-0.37495265863180105,51.67333814806778],[-0.37470938778310636,51.67354882135112],[-0.37467208633968024,51.673581566745625],[-0.374227350716277,51.674127455528456],[-0.3738154703888857,51.67460466861674],[-0.3733494792031202,51.67505766888202],[-0.37217459866145575,51.67608182904628],[-0.37203723609275785,51.67620128168885],[-0.3718858048847885,51.676310651555305],[-0.37165725240198905,51.676475674280674],[-0.37072811020452934,51.677056268707105],[-0.3704914831628335,51.677283204827916],[-0.3704552953269788,51.67736450639838],[-0.3704363129173839,51.67740829114683],[-0.370414727667868,51.677444847987225],[-0.37032617420934877,51.6774966566469],[-0.37011936653164457,51.6776170317821],[-0.36986482956640965,51.67773485576482],[-0.36927460420997693,51.677982051345495],[-0.3690131485583867,51.678133038816945],[-0.3687661404274566,51.67832656606224],[-0.3688663546038533,51.67843493200484],[-0.36937409484965683,51.678794457698984],[-0.36941956441930734,51.67881675338334],[-0.3695245242235818,51.678836189141116],[-0.369749555332078,51.678852797366844],[-0.3698792191992493,51.678904937865646],[-0.369959173510941,51.678936611337136],[-0.3700773943558266,51.6789454438612],[-0.37040516936393136,51.67892032683523],[-0.3704922129838668,51.67923625392963],[-0.37046021770112275,51.679602667574144],[-0.37053765621497703,51.679661274473034],[-0.3706164938986903,51.67972079902789],[-0.3706538779452901,51.679769051590526],[-0.37065824536477304,51.67980686770787],[-0.3706962347900906,51.68008076261778],[-0.3707288476888536,51.68021875276482],[-0.3707704417398836,51.68030922437744],[-0.3708811905867923,51.68044659075293],[-0.3709966641150043,51.68053538942616],[-0.37101296022559693,51.68060303550731],[-0.3710345061087037,51.68069053225335],[-0.3710400872455589,51.680774300701685],[-0.371038700716944,51.68081293618807],[-0.3709882682812927,51.68084909303194],[-0.37083690557592847,51.68091621201776],[-0.37074816154966267,51.68096981589486],[-0.37073622080598173,51.6810200808684],[-0.3707599393745948,51.681086931646675],[-0.3708258623868403,51.681184033284204],[-0.37086884269809156,51.681235868449676],[-0.3709381431734572,51.68131863329649],[-0.37103255879532865,51.681469257297785],[-0.3710104561657012,51.681520189733746],[-0.3709458261346698,51.68154985796486],[-0.37081102442226743,51.68159742968146],[-0.3706036715867229,51.6816494780847],[-0.3705352768979451,51.68170426421344],[-0.3705257147935719,51.68176795571623],[-0.3706310570976628,51.681976263197946],[-0.3706234774379497,51.68218740927435],[-0.3705660749337262,51.68225493218714],[-0.3703198577483802,51.68242600098511],[-0.37024024341086487,51.682507599119916],[-0.3701436085483796,51.68262141216735],[-0.3701010471091317,51.68267745482988],[-0.36996107915280224,51.68274922506786],[-0.3698921749236761,51.68281479054674],[-0.36979905654487,51.682950227479424],[-0.36966592739266757,51.68311378439873],[-0.3696617286391747,51.68323067848455],[-0.36958432605848823,51.68333028545618],[-0.3694242804511336,51.683559180959705],[-0.3693621860185068,51.68387663385689],[-0.36936033070746627,51.6840510014663],[-0.3693842501722339,51.68410886579237],[-0.3694904919209543,51.68429201570231],[-0.3696448769386311,51.68434360004635],[-0.3697477511457047,51.68437828914587],[-0.36982627130796014,51.68444679874769],[-0.36993609076273926,51.68449066324204],[-0.36999192703164885,51.68450671993439],[-0.3700810227995336,51.68452323813981],[-0.370224094595101,51.68452792011264],[-0.37037775057896977,51.684520164532955],[-0.37070117627336163,51.68457409268702],[-0.3709026236203737,51.684603854634105],[-0.3711669869969201,51.68465516482299],[-0.3713258496673024,51.68466186282416],[-0.3723413412999761,51.68470380637591],[-0.3724734653699354,51.6847676636631],[-0.3725232902469155,51.684791726813536],[-0.37278273533960277,51.68502014523795],[-0.3728051523044005,51.68504023268308],[-0.372905717365133,51.68505960432895],[-0.37304506878535526,51.68508490741695],[-0.37322131971170885,51.68513229488587],[-0.37337344137491996,51.68520730569297],[-0.3735052236281996,51.68524418934736],[-0.37380266673539597,51.6854209037944],[-0.37403656708016636,51.68555367904012],[-0.37419671699621104,51.68560443804405],[-0.37422822394249466,51.68561386340321],[-0.37461467436021245,51.685809877095124],[-0.3749108246869669,51.685982974988875],[-0.3765353546166372,51.68707463606882],[-0.3768588772440957,51.68732991166905],[-0.3769470615138965,51.6874121243492],[-0.37695833661170214,51.68742037020952],[-0.37702540565718173,51.687486021019495],[-0.37718068689659445,51.68763649054951],[-0.3773460931490213,51.68774404181806],[-0.3775977239755021,51.687865278227534],[-0.377954651827641,51.68800055433894],[-0.378084475663319,51.688049181703306],[-0.37828686198857087,51.68809332754801],[-0.3785089646863833,51.688720436000054],[-0.37855371423833056,51.68916701655523],[-0.3787231087414039,51.68989407879549],[-0.3782120493517677,51.69026925092553],[-0.377206902127964,51.690904579382625],[-0.3769065028026827,51.69113235400951],[-0.37634107989032617,51.691652394567214],[-0.37583216311899065,51.69212646911399],[-0.37539385727227476,51.69248726309352],[-0.375358260285264,51.69251194094103],[-0.3755580523373862,51.6929121249114],[-0.3766166386710974,51.69280540536538],[-0.37744655017382645,51.692781814817664],[-0.37775653326767533,51.692769915812484],[-0.37790017957283334,51.692759314688416],[-0.37826768754853723,51.69271665605935],[-0.3787418747672876,51.69268634647411],[-0.37871610544646156,51.692923399738625],[-0.37872000631756136,51.6930979378198],[-0.3788175594384062,51.69324221501195],[-0.3788874289787148,51.693393391695],[-0.37886541137017204,51.69348208288073],[-0.37882565426962783,51.69358311432491],[-0.37865392621117133,51.69397546680913],[-0.3786018346816904,51.694258002942234],[-0.37861758707657095,51.69434460782204],[-0.37863712245952286,51.694445558519014],[-0.37873006386350055,51.69467885710192],[-0.37879737316856804,51.694738217699715],[-0.37901586942815496,51.69469628644167],[-0.37929325601941566,51.69478910966908],[-0.379213646076208,51.695073962998165],[-0.37919950369238475,51.695346235435814],[-0.3805923130127874,51.69544275688863],[-0.38118988004579935,51.69548605371194],[-0.38142214178361056,51.69554319127587],[-0.3817497251408053,51.695570179016336],[-0.38240174575630337,51.69566554872745],[-0.38313227192149324,51.69583112486607],[-0.3836766723080421,51.695943793658245],[-0.38407905869713727,51.69598088355436],[-0.38441406698124725,51.69599717931048],[-0.38497448269400203,51.6960255636567],[-0.38545358135808055,51.69606362155961],[-0.38634801187922313,51.696101098934214],[-0.38686116161508677,51.6962385030611]]]}}]}
  var organisations = [{"organisation":"local-authority-eng:WAT","wikidata":"Q7974596","name":"Watford Borough Council","website":"https://www.watford.gov.uk","twitter":"","statistical-geography":"E07000103","toid":"","opendatacommunities":"http://opendatacommunities.org/id/district-council/watford","opendatacommunities-area":"http://opendatacommunities.org/id/geography/administration/nmd/E07000103","billing-authority":"E1939","census-area":"26UK","local-authority-type":"NMD","esd-inventories":"","start-date":"","end-date":""}]
  var brownfield = [{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B001","site-address":"Pinner Road, Car Wash & Bushey Station Car Park & sub station (TFL)","site-plan-url":"","deliverable":"","ownership":"mixed ownership","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.644936","longitude":"-0.384338","hectares":"0.85","minimum-net-dwellings":"80","maximum-net-dwellings":"80","start-date":"2017-09-29","end-date":"","notes":"Site was proposed in the Local Plan part 2 publication, Site ref H1","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B002","site-address":"Skate Park at Lower Derby Road, plus car wash, auto repair and retail","site-plan-url":"","deliverable":"","ownership":"mixed ownership","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.654044","longitude":"-0.390867","hectares":"0.35","minimum-net-dwellings":"100","maximum-net-dwellings":"100","start-date":"2017-09-29","end-date":"","notes":"Site was proposed in the Local Plan part 2 publication, Site ref H2","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B003","site-address":"Vicarage Road, MOT Garage adjacent football stadium, Watford","site-plan-url":"","deliverable":"","ownership":"mixed ownership","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.650831","longitude":"-0.401172","hectares":"0.25","minimum-net-dwellings":"15","maximum-net-dwellings":"15","start-date":"2017-09-29","end-date":"","notes":"Site was proposed in the Local Plan part 2 publication, Site ref H3","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B004","site-address":"Telephone Exchange, First Avenue, adjacent to Lea Farm Recreation Ground","site-plan-url":"","deliverable":"","ownership":"","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.685367","longitude":"-0.38912","hectares":"0.35","minimum-net-dwellings":"18","maximum-net-dwellings":"18","start-date":"2017-09-29","end-date":"","notes":"Site was proposed in the Local Plan part 2 publication, Site ref H4","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B005","site-address":"Jewsons Builders Yard-Queens Avenue","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.650818","longitude":"-0.408775","hectares":"0.35","minimum-net-dwellings":"49","maximum-net-dwellings":"49","start-date":"2017-09-29","end-date":"","notes":"Site was proposed in the Local Plan part 2 publication, Site ref H5","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B006","site-address":"Bill Everett Centre, derelict site, Leggatts Way, North of woodland","site-plan-url":"","deliverable":"","ownership":"owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.682003","longitude":"-0.408897","hectares":"1.07","minimum-net-dwellings":"40","maximum-net-dwellings":"40","start-date":"2017-09-29","end-date":"","notes":"Site was proposed in the Local Plan part 2 publication, Site ref H6","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B007","site-address":"Gade Close, Rickmansworth Road","site-plan-url":"","deliverable":"","ownership":"","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.653171","longitude":"-0.421226","hectares":"0.5","minimum-net-dwellings":"10","maximum-net-dwellings":"10","start-date":"2017-09-29","end-date":"","notes":"Site was proposed in the Local Plan part 2 publication, Site ref H7","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B008","site-address":"Garages-York Way adjacent M1, Meriden","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.683109","longitude":"-0.377338","hectares":"0.1","minimum-net-dwellings":"4","maximum-net-dwellings":"4","start-date":"2017-09-29","end-date":"","notes":"Site was proposed in the Local Plan part 2 publication, Site ref H8","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B009","site-address":"Metropolitan Line Station area Cassiobury Park Avenue","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.656958","longitude":"-0.418651","hectares":"3","minimum-net-dwellings":"100","maximum-net-dwellings":"100","start-date":"2017-09-29","end-date":"","notes":"Site was proposed in the Local Plan part 2 publication, Site ref H9","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B010","site-address":"Bowman's Green Garages, Meriden","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.682483","longitude":"-0.380196","hectares":"0.1","minimum-net-dwellings":"4","maximum-net-dwellings":"4","start-date":"2017-09-29","end-date":"","notes":"Site was proposed in the Local Plan part 2 publication, Site ref H11","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B011","site-address":"Watford Junction-Colonial Quarter","site-plan-url":"","deliverable":"","ownership":"mixed ownership","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.666128","longitude":"-0.393389","hectares":"4.7","minimum-net-dwellings":"1043","maximum-net-dwellings":"1043","start-date":"2017-09-29","end-date":"","notes":"Part of SPA2 Watford Junction site identified in the Local Plan part 2 publication","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B012","site-address":"Watford Junction-St Alban's Quarter","site-plan-url":"","deliverable":"","ownership":"mixed ownership","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.667204","longitude":"-0.397081","hectares":"2.5","minimum-net-dwellings":"618","maximum-net-dwellings":"618","start-date":"2017-09-29","end-date":"","notes":"\"Part of SPA2 Watford Junction site identified in the Local Plan part 2 publication\"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B013","site-address":"Watford Junction-Station Quarter West","site-plan-url":"","deliverable":"","ownership":"mixed ownership","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.665096","longitude":"-0.396129","hectares":"2.7","minimum-net-dwellings":"537","maximum-net-dwellings":"537","start-date":"2017-09-29","end-date":"","notes":"Part of SPA2 Watford Junction site identified in the Local Plan part 2 publication","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B014","site-address":"Watford Junction-Station Quarter East","site-plan-url":"","deliverable":"","ownership":"mixed ownership","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.665282","longitude":"-0.394619","hectares":"3.5","minimum-net-dwellings":"314","maximum-net-dwellings":"314","start-date":"2017-09-29","end-date":"","notes":"Part of SPA2 Watford Junction site identified in the Local Plan part 2 publication","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B015","site-address":"Watford Junction next to railway line","site-plan-url":"","deliverable":"","ownership":"mixed ownership","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.666792","longitude":"-0.399193","hectares":"2.2","minimum-net-dwellings":"278","maximum-net-dwellings":"278","start-date":"2017-09-29","end-date":"","notes":"Part of SPA2 Watford Junction site identified in the Local Plan part 2 publication","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B016","site-address":"10-12 Chalk Hill, car park and factory adjacent Bushey Arches","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.647176","longitude":"-0.383796","hectares":"0.45","minimum-net-dwellings":"120","maximum-net-dwellings":"120","start-date":"2017-09-29","end-date":"","notes":"Site considered during first consultation on the Local Plan part 2, Site ref H1; current pre-app","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B017","site-address":"The Gossamers / York Way Garages, Meriden","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.681476","longitude":"-0.38016","hectares":"0.25","minimum-net-dwellings":"133","maximum-net-dwellings":"133","start-date":"2017-09-29","end-date":"","notes":"\"Site considered during first consultation on the Local Plan part 2, Site ref H13\"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B018","site-address":"North Watford Library, Lemarie Centre for Charities, and health facilities","site-plan-url":"","deliverable":"","ownership":"owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.689435","longitude":"-0.39401","hectares":"1.3","minimum-net-dwellings":"30","maximum-net-dwellings":"30","start-date":"2017-09-29","end-date":"","notes":"\"Site was proposed in the Local Plan part 2 publication; Site Ref MXD1\"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B019","site-address":"The Brow / Newhouse Crescent, near Woodside Stadium","site-plan-url":"","deliverable":"","ownership":"owned by a public authority","planning-permission-status":"permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.69696","longitude":"-0.39849","hectares":"0.2","minimum-net-dwellings":"38","maximum-net-dwellings":"38","start-date":"2017-09-29","end-date":"","notes":"\"Site was proposed in the Local Plan part 2 publication; Site Ref MXD2\"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B020","site-address":"Gas Holder Site, Lower High Street","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"pending decision","planning-permission-type":"","hazardous-substances":"","latitude":"51.649278","longitude":"-0.386208","hectares":"1.5","minimum-net-dwellings":"92","maximum-net-dwellings":"92","start-date":"2017-09-29","end-date":"","notes":"\"Site was proposed in the Local Plan part 2 publication; Site Ref MXD3\"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B021","site-address":"Ascot Road, Eagle Relocations","site-plan-url":"","deliverable":"","ownership":"owned by a public authority","planning-permission-status":"permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.649755","longitude":"-0.424005","hectares":"3.6","minimum-net-dwellings":"485","maximum-net-dwellings":"485","start-date":"2017-09-29","end-date":"","notes":"\"Site was proposed in the Local Plan part 2 publication; Site Ref MXD4\"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B022","site-address":"Cow Lane Garages, north of Sainsbury's/North Western Avenue","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.682462","longitude":"-0.389773","hectares":"0.06","minimum-net-dwellings":"5","maximum-net-dwellings":"5","start-date":"2017-09-29","end-date":"","notes":"\"Application refused. Decision issued on 19/04/2017\"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B023","site-address":"85 Chalk Hill/ Haydon Road, adjacent to Bushey boundary","site-plan-url":"","deliverable":"","ownership":"","planning-permission-status":"pending decision","planning-permission-type":"","hazardous-substances":"","latitude":"51.646183","longitude":"-0.378296","hectares":"0.08","minimum-net-dwellings":"10","maximum-net-dwellings":"10","start-date":"2017-09-29","end-date":"","notes":"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B024","site-address":"Land Adjacent To 17-19 St Johns Road/Estcourt Road","site-plan-url":"","deliverable":"","ownership":"","planning-permission-status":"permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.660995","longitude":"-0.395479","hectares":"0.05","minimum-net-dwellings":"6","maximum-net-dwellings":"6","start-date":"2017-09-29","end-date":"","notes":"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B025","site-address":"Garages at Balmoral Road, adjacent to railway line and The Gym","site-plan-url":"","deliverable":"","ownership":"owned by a public authority","planning-permission-status":"pending decision","planning-permission-type":"","hazardous-substances":"","latitude":"51.67155","longitude":"-0.393385","hectares":"0.06","minimum-net-dwellings":"11","maximum-net-dwellings":"11","start-date":"2017-09-29","end-date":"","notes":"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B026","site-address":"70-72 Fearnley Street, adjacent Vicarage Road Cemetery","site-plan-url":"","deliverable":"","ownership":"","planning-permission-status":"pending decision","planning-permission-type":"","hazardous-substances":"","latitude":"51.653226","longitude":"-0.402056","hectares":"0.1","minimum-net-dwellings":"8","maximum-net-dwellings":"8","start-date":"2017-09-29","end-date":"","notes":"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B027","site-address":"Land to the rear of Ye Corner, Chalk Hill, near Bushey Arches","site-plan-url":"","deliverable":"","ownership":"","planning-permission-status":"pending decision","planning-permission-type":"","hazardous-substances":"","latitude":"51.646906","longitude":"-0.382447","hectares":"0.16","minimum-net-dwellings":"15","maximum-net-dwellings":"15","start-date":"2017-09-29","end-date":"","notes":"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B028","site-address":"Land To The Rear Of 1-3 Queens Avenue, tyre garage","site-plan-url":"","deliverable":"","ownership":"","planning-permission-status":"pending decision","planning-permission-type":"","hazardous-substances":"","latitude":"51.650562","longitude":"-0.411184","hectares":"0.72","minimum-net-dwellings":"9","maximum-net-dwellings":"9","start-date":"2017-09-29","end-date":"","notes":"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B029","site-address":"71-73 Broadway, adjacent to Mount Zion Baptist Chapel","site-plan-url":"","deliverable":"","ownership":"","planning-permission-status":"permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.657365","longitude":"-0.392325","hectares":"0.05","minimum-net-dwellings":"8","maximum-net-dwellings":"8","start-date":"2017-09-29","end-date":"","notes":"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B030","site-address":"Garages at Kings Avenue, just off Harwoods Road / Chater Infant School","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.65322","longitude":"-0.409573","hectares":"0.06","minimum-net-dwellings":"4","maximum-net-dwellings":"4","start-date":"2017-09-29","end-date":"","notes":"Garages let mainly for storage. Site suggested through Call for Sites","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B031","site-address":"Watford Magistrates Court and Police Station, St John's Road, near Holiday Inn","site-plan-url":"","deliverable":"","ownership":"owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.661544","longitude":"-0.39744","hectares":"0.26","minimum-net-dwellings":"","maximum-net-dwellings":"","start-date":"2017-09-29","end-date":"","notes":"No relevant planning history. Site suggested through Call for Sites","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B032","site-address":"Both sides of St John's Road / corner of St Alban's Road, Car Retailer","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.661631","longitude":"-0.400531","hectares":"0.21","minimum-net-dwellings":"93","maximum-net-dwellings":"93","start-date":"2017-09-29","end-date":"","notes":"Current pre-app. Site suggested through Call for Sites","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B033","site-address":"Watford Telephone Exchange Car Park, Exchange Road Town Centre","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.655633","longitude":"-0.398545","hectares":"0.25","minimum-net-dwellings":"80","maximum-net-dwellings":"80","start-date":"2017-09-29","end-date":"","notes":"Site suggested through Call for Sites","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B034","site-address":"Former Meriden School Site, The Meadows, south of Meriden Clinic","site-plan-url":"","deliverable":"","ownership":"owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.680617","longitude":"-0.383734","hectares":"0.2","minimum-net-dwellings":"","maximum-net-dwellings":"","start-date":"2017-09-29","end-date":"","notes":"Site suggested through Call for Sites","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2017-09-29","organisation":"local-authority-eng:WAT","site":"B035","site-address":"83B Tolpits Lane, adjacent to shops and maisonettes","site-plan-url":"","deliverable":"","ownership":"","planning-permission-status":"permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"51.646222","longitude":"-0.416033","hectares":"0.29","minimum-net-dwellings":"9","maximum-net-dwellings":"9","start-date":"2017-09-29","end-date":"","notes":"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2018-05-22","organisation":"local-authority-eng:WAT","site":"B036","site-address":"Corner of Park Avenue and Rickmansworth Road","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"","longitude":"","hectares":"0.09","minimum-net-dwellings":"","maximum-net-dwellings":"","start-date":"","end-date":"","notes":"","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"},{"entry-date":"2018-05-22","organisation":"local-authority-eng:WAT","site":"B037","site-address":"Ascot Road","site-plan-url":"","deliverable":"","ownership":"not owned by a public authority","planning-permission-status":"not permissioned","planning-permission-type":"","hazardous-substances":"","latitude":"","longitude":"","hectares":"","minimum-net-dwellings":"","maximum-net-dwellings":"","start-date":"","end-date":"","notes":"Site identified in Ascot Road Masterplan","resource":"fd079fda542990e51591868c0ea88acb52a5ab48268b8ccde04005fa26f52831"}]
</script>

<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" crossorigin=""></script>
<script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js" crossorigin=""></script>
<script src="https://unpkg.com/leaflet.fullscreen@1.6.0/Control.FullScreen.js" crossorigin=""></script>
<script src="https://unpkg.com/leaflet-sidebar@0.2.2/src/L.Control.Sidebar.js" crossorigin=""></script>
<script src="https://unpkg.com/papaparse@5.1.1/papaparse.min.js" crossorigin=""></script>

<script>
var map = L.map('map', {
  preferCanvas: true,
  fullscreenControl: true
}).setView([52.561928, -1.464854], 7)

// Tile layers
L.tileLayer('https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', {
  id: 'base',
  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map)

// Sidebar
var sidebar = L.control.sidebar('sidebar', {
  position: 'right'
})

map.addControl(sidebar)

// Brownfield Features
var brownfieldFeatures = brownfield.map(function (point) {
  return {
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [point.longitude, point.latitude]
    },
    properties: point
  }
})

// Local authority boundaries (England only)
geoJson = geoJson.features.filter(function (item) {
  return item.properties.lad19cd.startsWith('E')
}).map(function (item) {
  var lad19cd = item.properties.lad19cd
  if (item.properties.lad19cd === 'E06000057') {
    // Northumberland
    lad19cd = 'E06000048'
  } else if (item.properties.lad19cd === 'E07000240') {
    // St Albans
    lad19cd = 'E07000100'
  } else if (item.properties.lad19cd === 'E07000241') {
    // Welwyn Hatfield
    lad19cd = 'E07000104'
  } else if (item.properties.lad19cd === 'E07000242') {
    // East Hertfordshire
    lad19cd = 'E07000097'
  } else if (item.properties.lad19cd === 'E07000243') {
    // Stevenage
    lad19cd = 'E07000101'
  } else if (item.properties.lad19cd === 'E08000037') {
    // Gateshead
    lad19cd = 'E08000020'
  }

  item.properties.organisation = organisations.find(function (organisation) {
    if (organisation['statistical-geography'] && organisation['statistical-geography'].length) {
      return organisation['statistical-geography'].toString().toLowerCase() === lad19cd.toString().toLowerCase()
    }
  })

  return item
})

L.geoJSON(geoJson, {
  style: {
    fillOpacity: 0,
    weight: 2,
    color: 'gray'
  },
  onEachFeature: function (feature, layer) {
    if(organisations.length === 1) {
      map.fitBounds(layer.getBounds())
    }

    if (!feature.properties.organisation) {
      layer.setStyle({
        fillColor: 'red',
        fillOpacity: 0.25
      })
    } else {
      var thisOrganisationsFeatures = brownfieldFeatures.filter(function (brownfieldFeature) {
        if (brownfieldFeature.properties.organisation.toLowerCase() === feature.properties.organisation.organisation.toLowerCase()) {
          return true
        }
        return false
      })

      var brownfieldMarkers = L.markerClusterGroup({
        showCoverageOnHover: false,
        zoomToBoundsOnClick: false,
        spiderfyOnMaxZoom: false,
        removeOutsideVisibleBounds: true,
        animate: false,
        disableClusteringAtZoom: 11,
        maxClusterRadius: 600,
        singleMarkerMode: false
      })
      var brownfieldOnMap = L.geoJSON({
        type: 'FeatureCollection',
        features: thisOrganisationsFeatures
      }, {
        pointToLayer: function (feature, latlng) {
          var size = isNaN(feature.properties.hectares) ? 100 : (Math.sqrt((feature.properties.hectares * 10000) / Math.PI))
          return L.circle(latlng, { color: 'red', fillColor: '#f03', fillOpacity: 0.5, radius: size.toFixed(2) })
        },
        onEachFeature: function (feature, layer) {
          layer.on({
            click: function () {
              sidebar.setContent('<h2>Loading...</h2>')
              sidebar.show()

              return Papa.parse('https://raw.githubusercontent.com/digital-land/map/master/docs/data/brownfield/' + feature.properties.organisation.toLowerCase().replace(':', '-') + '.csv', {
                download: true,
                header: true,
                complete: function (results) {
                  var point = results.data.find(function (row) {
                    return (row.latitude === feature.properties.latitude.toString()) && (row.longitude === feature.properties.longitude.toString())
                  })

                  if (point) {
                    content = ''

                    Object.keys(point).forEach(function (key) {
                      content = content + key + ': ' + point[key] + '<br>'
                    })
                  } else {
                    content = '<h2>Point not found - debug info:</h2><pre>' + JSON.stringify(results.data) + '</pre><h3>Looking for a row with latitude, longitude:</h3>' + feature.properties.latitude.toString() + ',' + feature.properties.longitude.toString()
                  }

                  sidebar.setContent(content)
                }
              })
            }
          })
        }
      })

      brownfieldMarkers.addLayer(brownfieldOnMap)
      map.addLayer(brownfieldMarkers)
    }

    layer.on({
      mouseover: function () {
        this.setStyle({
          fillColor: 'black',
          fillOpacity: 0.25
        })
      },
      mouseout: function () {
        this.setStyle({
          fillColor: 'white',
          fillOpacity: 0
        })
      },
      click: function () {
        return map.fitBounds(layer.getBounds())
      }
    })
  }
}).addTo(map)
</script>
